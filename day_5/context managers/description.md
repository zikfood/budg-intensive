Реализовать свой менеджер контекста, который при чтении текстового файла сначала всегда по умолчанию печатает количество строк в этом файле.
Можно использовать класс или декоратор @contextmanager